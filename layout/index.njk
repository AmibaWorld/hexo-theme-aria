{% extends "_layout.njk" %}

{% block title %}{{ config.title }} - {{ config.subtitle }}{% endblock %}

{% block content %}
<section id="posts" class="posts">
  {% for post in page.posts.toArray() %}
  <article class="index-post" itemscope itemtype="http://schema.org/Article">
    <div class="post-block">
      <link itemprop="mainEntityOfPage" href="{{ config.url }}{{ url_for(post.path) }}">
      <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
        <meta itemprop="name" content="{{ config.author }}">
        <meta itemprop="description" content="{{ config.description }}">
        <meta itemprop="image" content="{{ url_for( theme.avatar) }}">
      </span>
      <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
        <meta itemprop="name" content="{{ config.title }}">
      </span>
    </div>
    <header class="post-header">
      <h2 class="post-title" itemprop="name headline">
        <a class="post-title-link post-title-link-external{% if post.direction and post.direction.toLowerCase() == \"rtl\" %} rtl{% endif %}" href="{{ url_for(post.link) }}" itemprop="url">{{ post.title }}</a>
      </h2>
      <div class="post-meta">
        {% if post.date %}
        <span class="post-date">
          <i class="far fa-calendar-plus"></i> <time title="post-date" itemprop="dateCreated datePublished" datetime="{{ moment(post.date).format() }}">{{ date(post.date, config.date_format) }}</time>
        </span>
        {% endif %}
        {% if post.categories and post.categories.toArray().length %}
        <span class="post-meta-divider"> | </span>
        <span class="post-categories">
          <i class="far fa-folder-open"></i>
          {% for cat in post.categories.toArray() %}
            <span itemprop="about" itemscope itemtype="http://schema.org/Thing"> <a href="{{ url_for(cat.path) }}" itemprop="url" rel="index"><span itemprop="name">{{ cat.name }}</span></a></span>
          {% endfor %}
        </span>
        {% endif %}
        {% if post.comments and theme.comment %}
        <span class="post-meta-divider"> | </span>
          {% if theme.disqus.enable and theme.disqus.count %}
          <span class="post-comments-count">
            <i class="far fa-comments"></i> <a href="{{ url_for(post.path) }}#comments" itemprop="discussionUrl"><span class="post-comments-count disqus-comment-count" data-disqus-identifier="{{ post.path }}" itemprop="commentCount"></span></a>
          </span>
          {% elif theme.hypercomments_id %}
          <!--noindex-->
          <span class="post-comments-count">
            <i class="far fa-comments"></i> <a href="{{ url_for(post.path) }}#comments" itemprop="discussionUrl"><span class="post-comments-count hc-comment-count" data-xid="{{ post.path }}" itemprop="commentsCount"></span></a>
          </span>
          <!--/noindex-->
          {% endif %}
        {% endif %}
        {# {% if not is_index and theme.busuanzi_count.enable and theme.busuanzi_count.post_views %}
          <span class="post-meta-divider"> | </span>
          <span class="post-meta-item-icon"
          {% if not theme.post_meta.item_text %} title="{{ __('post.views') }}" {% endif %}>
          <i class="fa fa-{{ theme.busuanzi_count.post_views_icon }}"></i>
          {% if theme.post_meta.item_text %} {{__('post.views') + __('symbol.colon') }} {% endif %}
          <span class="busuanzi-value" id="busuanzi_value_page_pv" ></span>
          </span>
        {% endif %} #}
      </div>
    </header>
    <main class="post-body{% if theme.han %} han-init-context{% endif %}{% if post.direction and post.direction.toLowerCase() == \"rtl\" %} rtl{% endif %}" itemprop="articleBody">
      {% if post.description %}
      {{ post.description }}
      <div class="post-button">
        <a class="readmore" href="{{ url_for(post.path) }}">Read More &raquo;</a>
      </div>
      {% elif post.excerpt  %}
      {{ post.excerpt }}
      <div class="post-button">
        <a class="readmore" href="{{ url_for(post.path) }}">Read More &raquo;</a>
      </div>
      {% else %}
      {{ post.content }}
      {% endif %}
    </main>
    <footer class="post-footer">
      {% if post.tags and post.tags.toArray().length %}
      <div class="post-tags">
        {% for tag in post.tags.toArray() %}
        <a href="{{ url_for(tag.path) }}" rel="tag"># {{ tag.name }}</a>
        {% endfor %}
      </div>
      {% endif %}
    </footer>
  </article>
  {% endfor %}
</section>
{% endblock %}
